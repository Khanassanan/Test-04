<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aqua Water Check | pH & DO</title>
<style>
  :root{
    --bg:#0b1324; --card:#111a33; --ink:#eaf1ff; --muted:#b7c1d9;
    --ok:#22c55e; --warn:#f59e0b; --bad:#ef4444; --mid:#06b6d4; --edge:#a855f7;
    --ring: 0 0 0 3px rgba(99,102,241,.25);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", "Noto Sans", Arial, sans-serif;
    background: radial-gradient(1000px 600px at 80% -20%, #1b2a52 0%, transparent 60%) , var(--bg);
    color:var(--ink);
  }
  .wrap{max-width:1100px; margin:auto; padding:32px 20px 80px}
  header{display:flex; gap:16px; align-items:center; margin-bottom:24px}
  .logo{
    width:48px; height:48px; border-radius:16px; background:
      conic-gradient(from 160deg at 50% 50%, #22c55e, #06b6d4, #6366f1, #a855f7, #22c55e);
    box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 30px rgba(255,255,255,.18);
  }
  h1{font-size:clamp(22px, 3.2vw, 32px); margin:0}
  p.lead{margin:6px 0 0; color:var(--muted)}
  .grid{display:grid; gap:18px}
  @media(min-width:900px){ .grid{grid-template-columns: 1.1fr 1fr} }

  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.03), transparent 40%) , var(--card);
    border:1px solid rgba(255,255,255,.06);
    border-radius:20px; padding:18px;
    box-shadow:0 10px 40px rgba(0,0,0,.25);
  }
  .card h2{margin:0 0 12px; font-size:18px}
  .row{display:grid; gap:12px; grid-template-columns: 110px 1fr 100px}
  .row + .row{margin-top:12px}
  label{color:var(--muted); font-size:14px}
  input[type="number"]{
    width:100%; padding:12px 12px;
    background:#0e1730; color:var(--ink);
    border:1px solid rgba(255,255,255,.12); border-radius:12px;
    outline:none; font-size:16px;
  }
  input[type="number"]:focus{box-shadow:var(--ring); border-color:#6366f1}
  input[type="range"]{width:100%}
  .unit{display:flex; align-items:center; justify-content:center; background:#0e1730; border:1px solid rgba(255,255,255,.12); border-radius:12px}
  .unit span{opacity:.9}

  .meter{
    height:12px; background:#0d1430; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.08)
  }
  .bar{height:100%; width:0%; background:linear-gradient(90deg, #22c55e, #06b6d4); transition:width .5s ease}
  .status{
    display:flex; gap:10px; align-items:center; padding:12px 14px; border-radius:14px; margin-top:14px; font-size:15px;
    background:#0f1a36; border:1px solid rgba(255,255,255,.08)
  }
  .badge{padding:6px 10px; border-radius:999px; font-weight:700; font-size:12px; letter-spacing:.3px}
  .ok{background:rgba(34,197,94,.15); color:#34d399; border:1px solid rgba(34,197,94,.35)}
  .warn{background:rgba(245,158,11,.15); color:#fbbf24; border:1px solid rgba(245,158,11,.35)}
  .bad{background:rgba(239,68,68,.15); color:#fca5a5; border:1px solid rgba(239,68,68,.35)}
  .mid{background:rgba(6,182,212,.15); color:#67e8f9; border:1px solid rgba(6,182,212,.35)}
  .edge{background:rgba(168,85,247,.15); color:#c4b5fd; border:1px solid rgba(168,85,247,.35)}
  .tips{margin-top:10px; color:var(--muted); font-size:14px}
  .tips ul{margin:8px 0 0 18px}
  .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
  button{
    background:#1c2750; color:var(--ink); border:1px solid rgba(255,255,255,.12);
    padding:10px 14px; border-radius:12px; cursor:pointer;
  }
  button.primary{background:#2a3a78; border-color:#4f46e5}
  .foot{
    margin-top:16px; font-size:12px; color:#94a3b8; text-align:center
  }
  .flex{display:flex; gap:12px; align-items:center}
  .pill{padding:6px 10px; border-radius:999px; background:#0e1730; border:1px solid rgba(255,255,255,.08); font-size:12px; color:#9fb3d6}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>Aqua Water Check</h1>
        <p class="lead">ประเมินคุณภาพน้ำสำหรับการเพาะเลี้ยงสัตว์น้ำ จากค่า <b>pH</b> และออกซิเจนละลายน้ำ <b>(DO, mg/L)</b> แบบเรียลไทม์</p>
      </div>
    </header>

    <div class="grid">
      <!-- INPUTS -->
      <section class="card">
        <h2>ใส่ค่าที่วัดได้</h2>

        <div class="row">
          <label for="ph">ค่า pH</label>
          <input id="ph" type="number" step="0.1" min="0" max="14" placeholder="เช่น 7.5" />
          <div class="unit"><span>0 – 14</span></div>
        </div>

        <div class="meter" aria-hidden="true"><div id="phBar" class="bar"></div></div>

        <div class="row">
          <label for="do">ค่า DO</label>
          <input id="do" type="number" step="0.1" min="0" max="20" placeholder="เช่น 8.0" />
          <div class="unit"><span>mg/L</span></div>
        </div>

        <div class="meter" aria-hidden="true"><div id="doBar" class="bar"></div></div>

        <div class="btns">
          <button class="primary" id="demoBtn">ตัวอย่างค่ามาตรฐาน</button>
          <button id="clearBtn">ล้างค่า</button>
          <span class="pill" id="time"></span>
        </div>
      </section>

      <!-- RESULTS -->
      <section class="card" id="resultCard" aria-live="polite">
        <h2>ผลการประเมิน</h2>

        <div class="status">
          <span class="badge mid" id="phBadge">pH - รอข้อมูล</span>
          <div id="phMsg">ใส่ค่า pH เพื่อดูผล</div>
        </div>
        <div class="tips" id="phTips"></div>

        <div class="status">
          <span class="badge mid" id="doBadge">DO - รอข้อมูล</span>
          <div id="doMsg">ใส่ค่า DO เพื่อดูผล</div>
        </div>
        <div class="tips" id="doTips"></div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.08); margin:16px 0">

        <div class="flex">
          <div class="pill" id="summary">สรุป: -</div>
        </div>
      </section>
    </div>

    <p class="foot">เกณฑ์อ้างอิง (สรุป): pH 6.5–9.0 เหมาะสม • ≤4 อันตรายมาก • 4–6 เสี่ยง • 9–11 ไม่เหมาะสมระยะยาว • ≥11 เป็นพิษ • DO: &lt;4 mg/L ปลาตาย • 4–6 อยู่รอดน้อย • 6.5–9.5 ดีสำหรับปลาขนาดใหญ่ • 9.5–12 ดีต่อทุกขนาด</p>
  </div>

<script>
  const $ = (id)=>document.getElementById(id);
  const phI = $('ph'), doI = $('do');
  const phBar = $('phBar'), doBar = $('doBar');
  const phBadge=$('phBadge'), doBadge=$('doBadge');
  const phMsg=$('phMsg'), doMsg=$('doMsg');
  const phTips=$('phTips'), doTips=$('doTips');
  const summary=$('summary'), timeEl=$('time');

  function fmt(n){ return Number.isFinite(n)? Number(n).toFixed(1): '—'; }

  function classifyPH(pH){
    if(!Number.isFinite(pH)) return {level:'mid', text:'ใส่ค่า pH เพื่อดูผล', tip:''};
    if(pH<=4)   return {level:'bad', text:'อันตรายมาก (เสี่ยงปลาตาย)', tip:'ปรับเพิ่ม pH: เปลี่ยนน้ำบางส่วน เติมปูนโดโลไมต์/ปูนขาวอย่างระมัดระวัง และเพิ่มการเติมอากาศ'};
    if(pH<6)    return {level:'warn', text:'ต่ำเกินไป (ผลผลิตต่ำ/โตช้า)', tip:'เพิ่ม pH ทีละน้อย ตรวจวัดซ้ำทุก 30–60 นาที'};
    if(pH<6.5)  return {level:'edge', text:'ใกล้ขอบเขตล่าง (6.5)', tip:'ติดตามใกล้ชิด ปรับเล็กน้อยถ้าปลาเริ่มเครียด'};
    if(pH<=9)   return {level:'ok',  text:'เหมาะสมต่อการเพาะเลี้ยง (6.5–9.0)', tip:'คงการจัดการเดิม ตรวจเช็คตอนเช้ากับบ่าย'};
    if(pH<11)   return {level:'warn', text:'สูงเกินไป (ไม่เหมาะสมระยะยาว)', tip:'ลด pH: เปลี่ยนน้ำ เติมน้ำใหม่ pH ต่ำกว่า เดินเครื่องเติมอากาศ เพิ่มสารอินทรีย์เล็กน้อย'};
    return         {level:'bad', text:'เป็นพิษต่อปลา (≥11)', tip:'เปลี่ยนน้ำทันทีและลดแสงแดด จัดการด่วน'};
  }

  function classifyDO(doVal){
    if(!Number.isFinite(doVal)) return {level:'mid', text:'ใส่ค่า DO เพื่อดูผล', tip:''};
    if(doVal<4)   return {level:'bad', text:'วิกฤต (&lt;4 mg/L) ปลาตายได้', tip:'เร่งเติมอากาศ/เปิดน้ำตก เพิ่มการไหลเวียน เปลี่ยนน้ำบางส่วนทันที'};
    if(doVal<6)   return {level:'warn', text:'ต่ำมาก (อยู่รอดน้อย)', tip:'เพิ่มการเติมอากาศ หลีกเลี่ยงให้อาหารจนค่า DO ดีขึ้น'};
    if(doVal<6.5) return {level:'edge', text:'ใกล้ขอบเขตล่าง (6.5 mg/L)', tip:'ติดตามทุกชั่วโมง ช่วงเช้าค่า DO มักต่ำสุด'};
    if(doVal<=9.5)return {level:'mid', text:'เพียงพอสำหรับปลาขนาดใหญ่', tip:'ดีขึ้นได้อีกสำหรับลูกปลา/ปลาขนาดเล็ก'};
    if(doVal<=12) return {level:'ok',  text:'เหมาะสมต่อทุกขนาด (9.5–12)', tip:'คงการจัดการเดิม ตรวจสม่ำเสมอ'};
    return           {level:'warn', text:'สูงมาก (&gt;12 mg/L) เสี่ยงอิ่มตัวเกิน', tip:'เฝ้าดูอาการลอยตัว ลดการกระตุ้นสาหร่าย/แสงแดด'};
  }

  function setBadge(el, level, label){
    el.className='badge '+level;
    el.textContent=label;
  }
  function setBar(bar, value, max){
    if(!Number.isFinite(value)){ bar.style.width = '0%'; return; }
    const pct = Math.max(0, Math.min(100, (value/max)*100));
    bar.style.width = pct + '%';
  }

  function render(){
    const p = parseFloat(phI.value);
    const d = parseFloat(doI.value);

    const phC = classifyPH(p);
    const doC = classifyDO(d);

    setBadge(phBadge, phC.level, `pH ${Number.isFinite(p)?fmt(p):'—'}`);
    phMsg.innerHTML = phC.text;
    phTips.innerHTML = phC.tip ? `<ul><li>${phC.tip}</li></ul>` : '';

    setBadge(doBadge, doC.level, `DO ${Number.isFinite(d)?fmt(d):'—'} mg/L`);
    doMsg.innerHTML = doC.text;
    doTips.innerHTML = doC.tip ? `<ul><li>${doC.tip}</li></ul>` : '';

    setBar(phBar, p, 14);
    setBar(doBar, d, 20);

    // Summary
    const levels = {bad:3, warn:2, edge:1, mid:1, ok:0};
    const worst = (levels[phC.level] >= levels[doC.level]) ? phC : doC;
    const icon = worst.level==='ok' ? '✅' : worst.level==='warn' ? '⚠️' : worst.level==='bad' ? '⛔' : 'ℹ️';
    summary.textContent = `สรุป: ${icon} ${phC.text.replace(/ \(.+?\)/,'')} • ${doC.text.replace(/ \(.+?\)/,'')}`;
  }

  ['input','change'].forEach(ev=>{
    $('ph').addEventListener(ev, render);
    $('do').addEventListener(ev, render);
  });

  $('demoBtn').addEventListener('click', ()=>{
    phI.value = 7.8; doI.value = 10.2; render();
  });
  $('clearBtn').addEventListener('click', ()=>{
    phI.value=''; doI.value=''; render();
  });

  function tickTime(){
    const d = new Date();
    timeEl.textContent = 'เวลา: ' + d.toLocaleString('th-TH');
  }
  setInterval(tickTime, 1000); tickTime();
  render();
</script>
</body>
</html>
